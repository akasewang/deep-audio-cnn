import { LayerData, VisualizationData } from "@/types/types";
import { clsx, type ClassValue } from "clsx";
import { twMerge } from "tailwind-merge";

export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs));
}

export const ESC50_EMOJI_MAP: Record<string, string> = {
  dog: "ðŸ•",
  rain: "ðŸŒ§ï¸",
  crying_baby: "ðŸ‘¶",
  door_wood_knock: "ðŸšª",
  helicopter: "ðŸš",
  rooster: "ðŸ“",
  sea_waves: "ðŸŒŠ",
  sneezing: "ðŸ¤§",
  mouse_click: "ðŸ–±ï¸",
  chainsaw: "ðŸªš",
  pig: "ðŸ·",
  crackling_fire: "ðŸ”¥",
  clapping: "ðŸ‘",
  keyboard_typing: "âŒ¨ï¸",
  siren: "ðŸš¨",
  cow: "ðŸ„",
  crickets: "ðŸ¦—",
  breathing: "ðŸ’¨",
  door_wood_creaks: "ðŸšª",
  car_horn: "ðŸ“¯",
  frog: "ðŸ¸",
  chirping_birds: "ðŸ¦",
  coughing: "ðŸ˜·",
  can_opening: "ðŸ¥«",
  engine: "ðŸš—",
  cat: "ðŸ±",
  water_drops: "ðŸ’§",
  footsteps: "ðŸ‘£",
  washing_machine: "ðŸ§º",
  train: "ðŸš‚",
  hen: "ðŸ”",
  wind: "ðŸ’¨",
  laughing: "ðŸ˜‚",
  vacuum_cleaner: "ðŸ§¹",
  church_bells: "ðŸ””",
  insects: "ðŸ¦Ÿ",
  pouring_water: "ðŸš°",
  brushing_teeth: "ðŸª¥",
  clock_alarm: "â°",
  airplane: "âœˆï¸",
  sheep: "ðŸ‘",
  toilet_flush: "ðŸš½",
  snoring: "ðŸ˜´",
  clock_tick: "â±ï¸",
  fireworks: "ðŸŽ†",
  crow: "ðŸ¦â€â¬›",
  thunderstorm: "â›ˆï¸",
  drinking_sipping: "ðŸ¥¤",
  glass_breaking: "ðŸ”¨",
  hand_saw: "ðŸªš",
};

export const getEmojiForClass = (className: string): string => {
  return ESC50_EMOJI_MAP[className] || "ðŸ”ˆ";
};

export function splitLayers(visualization: VisualizationData) {
  const main: [string, LayerData][] = [];
  const internals: Record<string, [string, LayerData][]> = {};

  for (const [name, data] of Object.entries(visualization)) {
    if (!name.includes(".")) {
      main.push([name, data]);
    } else {
      const [parent] = name.split(".");
      if (parent === undefined) continue;

      if (!internals[parent]) internals[parent] = [];
      internals[parent].push([name, data]);
    }
  }

  return { main, internals };
}
